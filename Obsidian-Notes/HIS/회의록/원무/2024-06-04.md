
**외래접수**  hoootrcin

**이력관리**

| 접수번호    | 일련번호 | 입력상태 | 진료과 |
| ------- | ---- | ---- | --- |
| 1230001 | 1    | N    | 내과  |
| 1230001 | 2    | Y    | 외과  |
이력관리를 할 때, 같은 접수번호에는 상태가 'Y'인 건이 단 한줄만 조회되게 한다. 


**의사처방**

| 처방일자 | 처방일련번호 | 접수번호    | 처방코드 |
| ---- | ------ | ------- | ---- |
| 6/4  | 1      | 1230001 | A    |

**외래 계산**  hoootpcln

| 접수번호 | 계산일자 | 계산일련번호 | 수가코드 | 계산금액 | 수납상태 |
| -------- | -------- | ------------ | -------- | -------- | -------- |
| 1230001  | 6/5      | 1            | A        | 10000    | Y        |
|          |          | 2            | B        | 20000    | Y        |
|          |          |              |          |          |          |

**외래수납** hoootprcn



**재계산**
- 추가처방
- DC
- 환불
- 계산변경
- ...

외래계산 테이블에서 위의 재계산 항목에 대한 값들을 추가로 넣었을 때, 단순 계산을 하게 될 경우 계산이 틀어질 수 있다. 

ex) 조제일 경우, 최장일수로 계산을 처리해야한다. 3일치 5일치가 들어왔을때, 3일치 금액이 제거되고 5일치가 들어와야 한다. 


**수납내역**은 외래계산의 sum이다. 
기수납금 테이블을 만들었다. < 이 테이블에서 -에 대한 값을 처리한다. -> 이 테이블은 보험까지 내려간다. 

기수납금 테이블은 현급, 카드, 통장(?)으로 나누어져 있다.

수익의 마감은 수입 테이블에서 처리한다. 

수익 === 매출 (의료수익)

외래계산과, 수납이 잘 계산되면 이 테이터를 기반으로 마감까지 처리할 수 있다. 

**기수납금은 전부 다 더하면 0이 되어야한다.** 

부호만 바꿔서 내려간다 ?????
왜 저렇게 되는거지 ....

외래수납에서는 **회차** 컬럼을 두어 그룹하기 쉽게 한다. 


현재 wiki 에 cross check query를 올려둠. 보면 알 수 있음. 



## 처방의 이동??? 

외래로 접수를 해서 환자가 입원을 하는 상황일 때, 입원시 처방을 의사가 내리게 되면 해당 처방건들을 외래 테이블에 넣는다 

`하루에 입원과 외래가 동시에 있으면 안된다 ?`

외래에서 얼마가 빠져서 입원으로 들어갔는지를 알아야한다 ? 

외래에 있는 처방 -> 입원에 넣어준다 ?

COVID-19과 같은 경우, 

ex) 환자가 감기약, COVID-19를 진단 받았을 때 COVID-19의 경우 보험을 따로 청구해야한다. 
하지만 현재 구조에서는 같은 접수번호로 물려있음으로 붙어있다. 
현재 계산이 접수번호 단위로 묶여있으니, 접수번호를 분리한다. 이걸 **내원분리**라한다. 이러한 기능이 있어야. 자연스럽게 청구 데이터를 만들기가 쉬워진다. 


---

처방코드를 

가산이 붙어있는 처방코드를 세팅하자. 

즉, 처방코드를 하나를 더 만들어놓고, 가산이 되도록 








---
입원 

입원은 계산을 누적하는 개념. 매일매일 계산을 누적해놓다가 퇴원 시점에 한번에 처리한다. 



