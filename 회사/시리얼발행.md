#### 용어 정리 
- **SITEM.UNITCHNG_NB**: 해당 품목이 가지는 환산계수 
- LBARCODE.UNITMANG_QT = LOS_RCV_D.PO_QT =  LABEL_HISTORY.UNITMANG_QT: 관리단위수량
- LBARCODE.BAR_QT = LOS_RCV_D.RCV_QT = LABEL_HISTORY.IO_QT: 재고단위수량  
---
### 로직 확인 

1. 최초 관리단위 수량은 1로 고정한다.
2. 최초 재고단위 수량은 아래의 수식과 같이 산출한다. 
 $$ 
관리단위수량 * 환산계수(해당품목의) = 재고단위수량 
$$


3. 발행매수는 다음의 구분과 같이 구분되어 처리된다. 단, 모든 발행 매수는 ==정수==의 형태로 ==반올림 되어 처리된다.==
	3-1.  바코드등록 > 시리얼발행:  발행매수 
	3-2. 생산: $$ 지시수량 / 재고단위수량 $$
	3-3. 입/출고: $$ 입출고수량/관리단위수량  $$


4. 재계산 
	4-1.  바코드등록 > 시리얼발행: 
	- 관리단위수량 > 재고단위수량
	4-1. 생산: 
	- 관리단위수량 -> 재고단위수량, 발행매수 
	- 재고단위수량 -> 발행매수
	4-2. 입/출고: 
	- 관리단위수량 -> 재고단위수량, 발행매수 

---
### 적용된 화면 

* LMF0010 바코드관리 > 바코드 등록
* LMA0050 스마트제조시스템-실적관리-생산지시조회-생산실적등록
* LMA0060 스마트제조시스템-실적관리-생산지시조회-시리얼발행
* LMC0130 스마트제조시스템-입고관리-구매입고-입고입력(예외입고)
* LMC0330 스마트제조시스템-입고관리-외주입고-입고처리
* LMC0430 스마트제조시스템-입고관리-외주입고수정
* LMD0130 스마트제조시스템-출고관리-출고입력(예외)

--- 
### 외주입고수정(LMC0430)_관리단위수량 적용 

#### 
> ==**공통 사항**==  
> 1. 저장 시점에 재고단위를 처리한다.
> 2. 시리얼의 관리단위수량의 총합이 입출고 수량의 총합과 같을 때에 한정하여 재고수량은 시리얼바코드의 재고수량의 총합과 같다. 
> 3. 위에 해당하지 않는 경우은 다음과 같다. $$ 재고단위수량 = 입/출고수량 * 환산계수 $$


품목일땐  ? 노상관 ?? 
예를들어서, 10개를 찍었어. 거기에 맞는 재고 수량이 막 더해지겠지 
따따따따따따딲
근데 이것도 5개로 찍었어 근데 여기부터는 얼만큼을 찍었는지 알 수 없잖아 ? 그니깐 바꾸는 순간부터는 그냥 틀어지는거야. 바로 본래 품목의 환산계수로 계산될 거니깐. 

자. 
시리얼이야.
백엔드 저장시에 데이터 비교 및 환산계수 처리를 하기로 했음으로. 
일단 데이터를 저장해야겠지.

예를들어, 

입고수량 10개에 지금 시리얼 10개야. 
아무것도 건들지 않은 상태에서 시리얼로만 입고수량을 찍어낸거지 


이렇게 되면 ? 
시리얼에 있는 재고수량이 더해져서 처리가 될거야 
, LB.UNITMANG_QT BAR_QT -- 수량처리개선 : [1-1], [2-1]
, LB.BAR_QT STOCK_QT -- 수량처리개선 : [1-1], [2-1]
임으로.
결국 모든 stockQt의 합이 ioQt로, barQt -> unitmangQt가 되는거지 
근데 
이때, 수정이 일어났다면 ? 한번이라도 틀어지는 순간. 
품목의 환산계수를 기준으로 재계산이 일어나, 

근데 이때 다시 개수를 맞춘다면 ? 

현재 시리얼의 총 갯수만큼 다시 더해서 처리해야겠지. 
즉, 그럴려면 총 개수라는 파라미터가 필요해 

이걸 stockQt로 작업할까 ?
그리고 barQt



/**

* @수정

* 재고단위수량의 경우, 저장 시점에 관리한다.

* 입고수량과 시리얼의 관리단위의 총합이 일치할 경우, 시리얼의 재고수량의 총합이 해당 입고수량의 총합이 되며,

* 일치하지 않을 경우. 입고수량의 환산계수를 기준으로 재고수량을 산출한다.

*/


잠깐, 그 데이터가 들어가려면 일단, 전체적으로 그게 있어야겠네 ?
시리얼이 아니라 최초로 조회될때도 이게 있어야되네 
그리고 시리얼일때는 ? 그 때는 또 있어야지 계산된 값이 적용되야 하니깐 




