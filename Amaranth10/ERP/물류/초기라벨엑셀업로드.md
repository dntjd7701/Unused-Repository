---
작성자: 강우성
작성일: 2024-03-29
---

---
### 초기라벨엑셀업로드(BLY1030)****

![[Pasted image 20240320091059.png]]

#### 화면정의 

> 기존에 사용하던 UDI 바코드를 등록하는 신규메뉴

#### 주요 기능 

	- CRUD
	- 출고적용 
	- 출고일괄적용
	- 환율일괄적용
	- 쪽지전송
	- ONEFFICE 
	- 사이드바 
	- 인포메이션바 
	- 이력정보 

#### 설계서 

[물류_BLY1030_UDI초기바코드등록엑셀업로드(가제)](http://wiki.duzon.com:8080/pages/viewpage.action?pageId=228821942)
#### Work Flow 

![[Pasted image 20240329093407.png]]


#### 핵심 테이블 

| 테이블명               | 테이블 정의       |
| ------------------ | ------------ |
| LABEL_HISTORY_TEMP | 초기바코드등록엑셀업로드 |
| LBARCODE           | 품목바코드등록      |
| LABEL_HISTORY      | 라벨수불이력       |
| LABEL_ITEMSET      | 품목별라벨설정      |

---
### 용어 설명 

|  **용어**   | **정의**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| :-------: | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|    마감     | - 협의의 의미: 내가 판 금액과 고객이 산 금액이 일치하는지 확인<br>- 광의의 의미: 협의의 과정을 통해 최종적으로 해당 금액을 고객으로부터 받기 위해 행하는 전사적인 행동                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|    L/C    | L/C(Letter of Credit) 거래가 신용에 의해 움직일 수 있도록, 은행이 요청에 따라 신용을 보증하기 위해 발행하는 증서.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| LOCAL L/C | 내국신용장, 과거 수출이력 및 실적이 있거나 외국으로부터 수출신용장을 받은 국내의 업체가 수출할 물품을 제조하고나 가공할 때에 들어가는 원자재 or 수출용 완제품을 국내에 원할하게 조달하기 위해 만들어진 제도로 개설을 의뢰한 의뢰자의 신청에 따라 국내 공급업자를 수익자로 지정하여 은행에서 발행해주는 지급활약서. 즉, **내국신용장을 개설하는 이유는, 해외로 수출하는 물품이나 그 물품을 만들 재료를 국내에서 구매하기 위해서** 이며, 원자재 공급자 입장에서 해당 방식의 거래는 내국신용장 매입실적이 수출실적으로 인정되기 때문에 여러 금융혜택 및 세금 혜택을 받을 수 있기 때문이며, 구매자(수출자) 입장에서는 수출용 구매자금 대출 및 무역금융 혜택 및 원자재의 확실한 조달을 보장받을 수 있기에 사용한다.<br>전반적인 프로세스는 다음과 같이 진행된다.<br><br>수출자의 내국신용장 개설(재료 국내 구매를 위해) -> 재료 공급자가 대금 대신 내국신용장을 수령 -> 내국신용장을 은행에 제시하여 매입 신청 및 물품 대금 수령 -> 내국신용장을 매입한 은행은 내국신용장 개설 은행에 내국신용장을 제시하고 대금 수령 -> 내국신용장 개설 은행은 내국신용장 개설을 요청한 수출자에게 요청하여 대금 수령 |
|   구매승인서   | 내국신용장에 의하지 아니하고 국내에서 생산된 물품을 외화획득용 원료 또는 물품으로 구매하는 경우에 외국환은행의 장이 내국신용장에 준하여 발급하는 증서를 말한다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|   과세매출    | 상품이나 서비스 등을 제공하고 대가로 받았거나 받을 예정인 금액                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |


---
### 환경설정 

_SL_CFG(통제정보)_
- 전단계 관리구분 적용 여부에 따라 프로세스 적용 시, 관리구분 적용 
- 전단계 비고(내역) 적용 여부에 따라 프로세스 적용 시, 비고 적용 

_SYSCFG(시스템환경설정)_
- 자동환율관리 옵션 사용 여부에 따라 일자별 자동환율 정보 입력 및 코드피커 전환 (코드피커 <-> 수기 입력)
- 국내외환거래 허용 여부에 따라 국내 외환 거래 허용 여부 결정

_전자결제 
- 결재상신 버튼 여부 
- 결재정보 컬럼 사용 
- 전자결제를 사용할 경우, 결재 상태에 따라 데이터 삭제 제한 

 **통제** 
-  마감일자 이전 일자 수불 메뉴 입력 수정 X 
-  입력통제일자 이전 일자 메뉴 수정 X 
-  일괄 마감시 출고 변경 불가. 
-  마감통제일자보다 마감일자가 이전일 경우에는 신규등록, 수정, 삭제 불가 
-  이후 프로세스에 적용된 내역에 대해선 수정 및 삭제가 불가
-  직접 등록 불가 ('출고적용', '출고일괄적용'을 통해 출고 데이터를 적용받음으로써 마감처리가 가능)

**트리거**

> LSALECLS 

-   영업마감일 이전 데이터 CUD 불가 (사업장별마감통제/입력통제 LCTRL_MTL 테이블 참고)
-  회계전표 처리 시 UD 불가(DOCU_DT, DOCU_SQ -> 회계처리(매출/수금) 참고)  
- 분개생성 시 UD 불가(EX_MENU_DT, EX_MENU_SQ) -> 회계처리(매출/수금) 참고



DELETE: 
	- LSALECLS_D 내역 존재 시 삭제 불가 
	- 세금계산서 처리 시 삭제 불가 (TAX_NB)

UPDATE: 
	- 사업장, 부서, 사원 수정 불가(등록 시 조회조건 사업장, 사원, 부서)

---
###  프로세스  

#### 품목고유번호/UDI-DI

LABEL_ITEMSET의 ITEMUNIQ_CD는 유니크한 값이며, 이는 중복되어서는 안된다. 
그러므로 같은 품목이 이미 `품목별시리얼` 혹은 `UDI품목설정`에 등록되어있다면 이미 등록된 품목고유번호를 가져야하며, 그렇지 않을 경우 에러로 처리한다. 
단, `품목별시리얼설정`에서는 품목고유번호가 필수값이 아니므로, `UDI_YN = '0'`일 경우. 즉, UDI 품목이 아닐 경우에는 그 값이 NULL이 거나 일치해야함을 전제로 한다. 

해당 품목이 등록되어있지 않고, 품목고유번호가 중복되지 않는다면 그 데이터는 등록이 가능하다. 








****
### HISTORY 

#### 2024-03-29

-  품목과 품목고유번호의 검증을 위해. 일단 `품목별시리얼설정` 과 `UDI품목설정` 에 사전 등록하는것을 전제로 한다. 



--- 
### Befor/After Process 

 **이후 프로세스**

- [[회계처리(매출&수금)]]
- 매출전자세금계산서처리

**이전 프로세스**

- 출고등록